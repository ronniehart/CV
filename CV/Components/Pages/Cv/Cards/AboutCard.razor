@using System.Globalization
@using Application.Services.Contents

@inject IContentService ContentService

<RadzenCard id="about">
    <RadzenRow>
        <RadzenColumn Size="12" SizeMD="7">
            <RadzenText TextStyle="TextStyle.H4" Text="About Me" />
            <RadzenText TextStyle="TextStyle.Body1" Style="padding-right: 10px;">
                @ContentService.GetValue("ABOUT_TEXT")
            </RadzenText>
        </RadzenColumn>
        <RadzenColumn Size="12" SizeMD="5">
            <RadzenText TextStyle="TextStyle.H4" Text="Bio" />
            <RadzenRow>
                <RadzenColumn Size="5">
                    <RadzenStack Orientation="Orientation.Horizontal" Gap="5px">
                        <RadzenIcon Icon="calendar_today" />
                        <RadzenText>Age</RadzenText>
                    </RadzenStack>
                </RadzenColumn>
                <RadzenColumn Size="7">
                    @Age
                </RadzenColumn>

                <RadzenColumn Size="5">
                    <RadzenStack Orientation="Orientation.Horizontal" Gap="5px">
                        <RadzenIcon Icon="email" />
                        <RadzenText>E-Mail</RadzenText>
                    </RadzenStack>
                </RadzenColumn>
                <RadzenColumn Size="7">
                    <RadzenLink Path="@ContentService.GetValue("ABOUT_EMAIL_LINK")" Text="@ContentService.GetValue("ABOUT_EMAIL")" />
                </RadzenColumn>

                <RadzenColumn Size="5">
                    <RadzenStack Orientation="Orientation.Horizontal" Gap="5px">
                        <RadzenIcon Icon="phone" />
                        <RadzenText>Phone</RadzenText>
                    </RadzenStack>
                </RadzenColumn>
                <RadzenColumn Size="7">
                    <RadzenLink Path="@ContentService.GetValue("ABOUT_PHONE_LINK")" Text="@ContentService.GetValue("ABOUT_PHONE")" />
                </RadzenColumn>

                <RadzenColumn Size="5">
                    <RadzenStack Orientation="Orientation.Horizontal" Gap="5px">
                        <RadzenIcon Icon="code" />
                        <RadzenText>Github</RadzenText>
                    </RadzenStack>
                </RadzenColumn>
                <RadzenColumn Size="7">
                    <RadzenLink Path="@ContentService.GetValue("ABOUT_GITHUB_LINK")" Text="@ContentService.GetValue("ABOUT_GITHUB")" />
                </RadzenColumn>

                <RadzenColumn Size="5">
                    <RadzenStack Orientation="Orientation.Horizontal" Gap="5px">
                        <RadzenIcon Icon="place" />
                        <RadzenText>Wohnort</RadzenText>
                    </RadzenStack>
                </RadzenColumn>
                <RadzenColumn Size="7">
                    <RadzenText Text="@ContentService.GetValue("ABOUT_RESIDENCE")" />
                </RadzenColumn>
            </RadzenRow>
        </RadzenColumn>
    </RadzenRow>
</RadzenCard>

@code {
    private string Age = string.Empty;

    protected override void OnInitialized()
    {
        var plainDateOfBirth = ContentService.GetValue("ABOUT_BIRTHDATE");
        var dateOfBirth = DateTime.ParseExact(plainDateOfBirth, "dd/MM/yyyy", CultureInfo.InvariantCulture);
        var today = DateTime.Now;
        var age = today.Year - dateOfBirth.Year;

        if (today < dateOfBirth.AddYears(age))
        {
            age--;
        }

        Age = age.ToString();
    }
}
